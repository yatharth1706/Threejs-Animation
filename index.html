<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Practicing Three js</title>
	<style>
		body { margin: 0; }
		canvas { 
			display: block; 
		}
		#btn1{
			position: absolute;
			top: 60%;
			left: 47%;
		}
		#btn2{
			position: absolute;
			top: 70%;
			left: 47%;
		}

		#interact{
			position: absolute;
			top: 80%;
			left: 47%;
		}

		input{
			position: absolute;
			top: 70%;
			left: 47%;	
		}
	</style>
	

</head>

<body>
	<canvas></canvas>
	<button id = "btn1">Play Sound</button>
	<button id = "interact">Play Music</button>

	<input type="range" min=-10  max=10 name="playback" id="playback">

	<script src="https://threejs.org/build/three.js"></script>
	
	<script>
		var canvas = document.querySelector("canvas");
		var btn = document.querySelector("#btn1");
		var playback = document.querySelector("#playback");
		var interact = document.querySelector("#interact");
		// three necessary things 1. Scene 2. Camera 3. Renderer
		
		// Create scene
		var scene = new THREE.Scene();
		var camera = new THREE.PerspectiveCamera(75,2,0.1,5);

		var renderer = new THREE.WebGLRenderer({canvas});

		// add some lighting
		{
		    const color = 0xFFFFFF;
		    const intensity = 1;
		    const light = new THREE.DirectionalLight(color, intensity);
		    light.position.set(-1, 2, 4);
		    scene.add(light);
		}

		// add rotating cube
		var geometry1 = new THREE.BoxGeometry(1,1,1);
		var material1 = new THREE.MeshBasicMaterial({color: 0x44aa88 });
		var cube = new THREE.Mesh(geometry1, material1);
		scene.add(cube);
		


		function render(time) {
		  time *= 0.001;  // convert time to seconds
		 
		  cube.rotation.x = time;
		  cube.rotation.y = time;
		 
		  renderer.render(scene, camera);
		 
		  requestAnimationFrame(render);
		}
		requestAnimationFrame(render);
		
		


	

		var audioListener, sound, audioLoader, media;

		
		interact.addEventListener('click', ()=>{
			console.log("Interacting");
			audioListener = new THREE.AudioListener();

			sound = new THREE.Audio(audioListener);


			audioLoader = new THREE.AudioLoader()
			audioLoader.load('sound/music1.mp3', function(buffer){
				sound.setBuffer(buffer);
				sound.setLoop = true;
				sound.play();
			});
			
			console.log(sound.isPlaying);
		})


		btn.addEventListener('click', function(){
			if(sound.isPlaying == true){
				sound.pause();
			}else{
				sound.play();
			}
			
		})

		playback.addEventListener('input', function(){
			sound.setPlaybackRate(this.value);
			console.log('clicked')
			// sound.play();
		})

	
	</script>
</body>
</html>