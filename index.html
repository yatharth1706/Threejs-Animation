<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Practicing Three js</title>
	<style>
		body { margin: 0; }
		canvas { display: block; }
		#btn1{
			position: absolute;
			top: 60%;
			left: 47%;
		}
		#btn2{
			position: absolute;
			top: 70%;
			left: 47%;
		}

		#interact{
			position: absolute;
			top: 80%;
			left: 47%;
		}

		input{
			position: absolute;
			top: 70%;
			left: 47%;	
		}
	</style>
	

</head>

<body>
	<button id = "btn1">Play Sound</button>
	<button id = "interact">Play Music</button>

	<input type="range" min=-10  max=10 name="playback" id="playback">

	<script src="https://threejs.org/build/three.js"></script>
	
	<script>
		var btn = document.querySelector("#btn1");
		var playback = document.querySelector("#playback");
		var interact = document.querySelector("#interact");
		// three necessary things 1. Scene 2. Camera 3. Renderer
		
		// Create scene
		var scene = new THREE.Scene();
		var camera = new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);

		var renderer = new THREE.WebGLRenderer();
		renderer.setSize(window.innerWidth, window.innerHeight);

		document.body.appendChild(renderer.domElement);


	

		// create shape
		// var geometry = new THREE.CubeGeometry();
		// var colour = new THREE.Color("hsl(0, 100%, 50%)");
		// var material = new THREE.MeshNormalMaterial({color: colour });

		// var cube = new THREE.Mesh(geometry, material);

		// scene.add(cube);

		// animate with rotation
		var geometry1 = new THREE.BoxGeometry(1,1,1);
		var material1 = new THREE.MeshPhongMaterial({color: 0xFFFF00});
		var cube = new THREE.Mesh(geometry1, material1);
		cube.position.set(-10,0,0);
		scene.add(cube);

		function animate(){
			requestAnimationFrame(animate);
			cube.rotation.x += 0.01;
			cube.rotation.y += 0.01;

			renderer.render(scene, camera);
		}

		animate();
		
		
		var material = new THREE.LineBasicMaterial({ color: 0xff0000 });
		
		// lets create some vertices to make a line
		var points = []
		points.push(new THREE.Vector3(-3,0,0));
		points.push(new THREE.Vector3(0,3,0));
		points.push(new THREE.Vector3(3,0,0));

		// connect all adjacent pairs using bufferGeometry

		var connect = new THREE.BufferGeometry().setFromPoints(points);

		// call line mesh
		var completeline = new THREE.Line(connect, material);

		// add it to the scene so that it is visible
		// completeline.position(2,0,0);
		scene.add(completeline); 

		camera.position.set(0,0,20);
		camera.lookAt(0,0,0);


		// // lets add audio
		// // three things necessary listener which is like a virtual listener
		// // add this listener to camera
		// // another one is virtual sound which virtual listener is listening
		// // then call audioloader to actually be able to load to the scene

		var audioListener, sound, audioLoader, media;

		

		interact.addEventListener('click', ()=>{
			console.log("Interacting");
			audioListener = new THREE.AudioListener();

			sound = new THREE.Audio(audioListener);

			mediaElement = new Audio( 'sound/music1.mp3' );
			mediaElement.loop = true;
			mediaElement.play();

			sound.setMediaElementSource( mediaElement );
			
			console.log(mediaElement.isPlaying);
		})


		btn.addEventListener('click', function(){
			if(sound.isPlaying == true){
				sound.pause();
			}else{
				sound.play();
			}
			
		})

		playback.addEventListener('input', function(){
			sound.setPlaybackRate(this.value);
			console.log('clicked')
			// sound.play();
		})

		var geometry = new THREE.BufferGeometry();
		// create a simple square shape. We duplicate the top left and bottom right
		
		// vertices because each vertex needs to appear once per triangle.
		var light = new THREE.AmbientLight( 0xffff00 ); // soft white light
		scene.add( light );
		var vertices = new Float32Array( [
			-1.0, -1.0,  1.0,
			 1.0, -1.0,  1.0,
			 1.0,  1.0,  1.0,

			 1.0,  1.0,  1.0,
			-1.0,  1.0,  1.0,
			-1.0, -1.0,  1.0
		] );

		// itemSize = 3 because there are 3 values (components) per vertex
		geometry.setAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );
		var material = new THREE.MeshBasicMaterial( { color: 0xff0000 } );
		var Yesmesh = new THREE.Mesh( geometry, material )
		Yesmesh.position.set(10,0,0);
		scene.add(Yesmesh);


		
	</script>
</body>
</html>